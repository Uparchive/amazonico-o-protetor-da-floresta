<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Índice dos Capítulos</title>
    <link rel="stylesheet" href="indicestyle.css">
    <script src="responsive.js" defer></script>
    <script src="script.js" defer></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Identifique o livro atual (por exemplo, usando um atributo data no body)
            const currentBook = document.body.dataset.bookId || "amazonico-o-protetor-da-floresta"; // Exemplo: 'NomeDoSeuLivro'

            // Função para obter o nome do armazenamento local com base no livro
            function getStorageKey() {
                return `${currentBook}_lastReadChapter`;
            }

            // Recupera o último capítulo lido do localStorage
            const lastReadChapter = localStorage.getItem(getStorageKey());
            console.log("Último capítulo lido recuperado do localStorage:", lastReadChapter); // Log para debug

            // Se houver um capítulo salvo no localStorage
            if (lastReadChapter) {
                // Remover destaque de todos os capítulos
                document.querySelectorAll('.chapter-list li').forEach(chapter => {
                    chapter.classList.remove('highlight');
                });

                // Adicionar destaque ao capítulo salvo
                const lastChapterElement = document.getElementById(lastReadChapter);
                if (lastChapterElement) {
                    lastChapterElement.classList.add('highlight');
                    console.log("Capítulo destacado:", lastReadChapter); // Log para debug
                }
            }
        });

        // Função para salvar o capítulo atual no localStorage ao clicar
        function setLastRead(chapterId) {
            const currentBook = document.body.dataset.bookId || "defaultBook"; // Exemplo: 'diariodeomega'
            const storageKey = `${currentBook}_lastReadChapter`;
            localStorage.setItem(storageKey, chapterId);
            console.log("Capítulo salvo no localStorage:", chapterId); // Log para debug
        }
    </script>
</head>
<body data-book-id="amazonico-o-protetor-da-floresta">
    <div class="container">
        <h1>Índice dos Capítulos</h1>
        <ul class="chapter-list">
            <li id="capitulo0"><a href="capitulo0.html" onclick="setLastRead('capitulo0')">Introdução</a></li>
            <li id="capitulo1"><a href="capitulo1.html" onclick="setLastRead('capitulo1')">Capítulo 1: As Raízes do Destino</a></li>
            <li id="capitulo2"><a href="capitulo2.html" onclick="setLastRead('capitulo2')">Capítulo 2: A Voz da Floresta</a></li>
            <li id="capitulo3"><a href="capitulo3.html" onclick="setLastRead('capitulo3')">Capítulo 3: A Primeira Prova</a></li>
            <li id="capitulo4"><a href="capitulo4.html" onclick="setLastRead('capitulo4')">Capítulo 4: Aliados da Floresta</a></li>
            <li id="capitulo5"><a href="capitulo5.html" onclick="setLastRead('capitulo5')">Capítulo 5: O Caminho para a Árvore da Vida</a></li>
            <li id="capitulo6"><a href="capitulo6.html" onclick="setLastRead('capitulo6')">Capítulo 6: O Guardião das Águas</a></li>
            <li id="capitulo7"><a href="capitulo7.html" onclick="setLastRead('capitulo7')">Capítulo 7: O Labirinto das Sombras</a></li>
            <li id="capitulo8"><a href="capitulo8.html" onclick="setLastRead('capitulo8')">Capítulo 8: O Chamado da Árvore</a></li>
            <li id="capitulo9"><a href="capitulo9.html" onclick="setLastRead('capitulo9')">Capítulo 9: A Revelação da Árvore</a></li>
            <li id="capitulo10"><a href="capitulo10.html" onclick="setLastRead('capitulo10')">Capítulo 10: O Desafio de Malakar</a></li>
            <li id="capitulo11"><a href="capitulo11.html" onclick="setLastRead('capitulo11')">Capítulo 11: Preparativos para a Última Batalha</a></li>
            <li id="capitulo12"><a href="capitulo12.html" onclick="setLastRead('capitulo12')">Capítulo 12: O Despertar do Espírito da Água</a></li>
            <li id="capitulo13"><a href="capitulo13.html" onclick="setLastRead('capitulo13')">Capítulo 13: O Chamado do Espírito do Ar</a></li>
            <li id="capitulo14"><a href="capitulo14.html" onclick="setLastRead('capitulo14')">Capítulo 14: A Força do Espírito da Terra</a></li>
            <li id="capitulo15"><a href="capitulo15.html" onclick="setLastRead('capitulo15')">Capítulo 15: O Julgamento do Espírito do Fogo</a></li>
            <li id="capitulo16"><a href="capitulo16.html" onclick="setLastRead('capitulo16')">Capítulo 16: O Conselho dos Espíritos</a></li>
            <li id="capitulo17"><a href="capitulo17.html" onclick="setLastRead('capitulo17')">Capítulo 17: A Marcha para a Escuridão</a></li>
            <li id="capitulo18"><a href="capitulo18.html" onclick="setLastRead('capitulo18')">Capítulo 18: A Batalha Começa</a></li>
            <li id="capitulo19"><a href="capitulo19.html" onclick="setLastRead('capitulo19')">Capítulo 19: O Silêncio Após a Tempestade</a></li>
            <li id="capitulo20"><a href="capitulo20.html" onclick="setLastRead('capitulo20')">Capítulo 20: Reconstruindo o Equilíbrio</a></li>
            <li id="capitulo21"><a href="capitulo21.html" onclick="setLastRead('capitulo21')">Capítulo 21: Adeus, Vovô</a></li>
            <li id="capitulo22"><a href="capitulo22.html" onclick="setLastRead('capitulo22')">Capítulo 22: A Primeira Grande Decisão</a></li>
            <li id="capitulo23"><a href="capitulo23.html" onclick="setLastRead('capitulo23')">Capítulo 23: Os Sussurros do Futuro</a></li>
            <li id="capitulo24"><a href="capitulo24.html" onclick="setLastRead('capitulo24')">Capítulo 24: O Alvorecer da Resistência</a></li>
            <li id="capitulo25"><a href="capitulo25.html" onclick="setLastRead('capitulo25')">Capítulo 25: O Círculo Completo</a></li>
        </ul>        
        <a href="index.html" class="back-button">Voltar à Capa</a>
    </div>
</body>
</html>
